<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Text Emoji Animation to GIF</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gif.js/0.2.0/gif.min.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      margin-top: 50px;
    }
    canvas {
      border: 2px solid #000;
      margin-bottom: 20px;
    }
    button {
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <h1>Text Emoji Animation to GIF</h1>
  <canvas id="emojiCanvas" width="300" height="300"></canvas><br>
  <button id="startBtn">Start Animation & Convert to GIF</button>

  <script>
    const canvas = document.getElementById("emojiCanvas");
    const ctx = canvas.getContext("2d");

    const gif = new GIF({
      workers: 2,
      quality: 10,
      width: canvas.width,
      height: canvas.height,
    });

    let x = canvas.width / 2;
    let y = canvas.height / 2;
    let dx = 2;
    let dy = 2;
    let isAnimating = false;

    // Draw initial text emoji
    ctx.font = "60px Arial";
    ctx.textAlign = "center";
    ctx.textBaseline = "middle";

    function captureFrame() {
      // Add current canvas frame to gif with a delay of 100ms
      gif.addFrame(canvas, { copy: true, delay: 100 });
    }

    function animateGif() {
      ctx.clearRect(0, 0, canvas.width, canvas.height); // Clear previous frame
      ctx.fillText("ðŸ˜Š", x, y); // Draw emoji

      x += dx;
      y += dy;

      // Bounce the emoji when it hits canvas edges
      if (x + 30 > canvas.width || x - 30 < 0) dx = -dx;
      if (y + 30 > canvas.height || y - 30 < 0) dy = -dy;

      captureFrame(); // Capture current frame for GIF

      // Stop when we have enough frames for the GIF
      if (gif.frames.length < 50) {
        requestAnimationFrame(animateGif); // Continue animation
      } else {
        gif.render(); // Render and create GIF
      }
    }

    gif.on('finished', function(blob) {
      const gifUrl = URL.createObjectURL(blob);
      const link = document.createElement('a');
      link.href = gifUrl;
      link.download = 'emoji-animation.gif';
      link.click(); // Trigger download of GIF
    });

    document.getElementById("startBtn").addEventListener("click", function() {
      if (!isAnimating) {
        isAnimating = true;
        animateGif();
      }
    });
  </script>
</body>
</html>
