<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Animate Static Image</title>
  <style>
    #canvas1 {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 600px;
      height: 600px;
    }
    .controls {
      position: absolute;
      z-index: 10;
      top: 30px;
      left: 50%;
      transform: translateX(-50%);
      text-align: center;
    }
    .controls input, .controls select {
      font-size: 18px;
      margin: 10px;
    }
  </style>
</head>
<body>
<canvas id="canvas1"></canvas>
<div class="controls">
  <input type="file" id="imageUpload" accept="image/*" />
  <br>
  <label for="animations">Animation Type:</label>
  <select id="animations">
    <option value="bounce">Bounce</option>
    <option value="slide">Slide</option>
    <option value="shake">Shake</option>
    <option value="rotate">Rotate</option>
  </select>
</div>

<script>
const canvas = document.getElementById("canvas1");
const ctx = canvas.getContext("2d");
canvas.width = 600;
canvas.height = 600;

let img = new Image();
let imgLoaded = false;
let playerState = 'bounce';
let frameCount = 0;

document.getElementById("animations").addEventListener("change", function(e) {
  playerState = e.target.value;
});

document.getElementById("imageUpload").addEventListener("change", function(e) {
  const file = e.target.files[0];
  if (!file) return;
  const reader = new FileReader();
  reader.onload = function(evt) {
    img.onload = function() {
      imgLoaded = true;
    };
    img.src = evt.target.result;
  };
  reader.readAsDataURL(file);
});

function animate() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  if (imgLoaded) {
    let dx = 0, dy = 0, angle = 0, scale = 1;

    switch (playerState) {
      case 'bounce':
        dy = Math.sin(frameCount * 0.1) * 20;
        break;
      case 'slide':
        dx = Math.sin(frameCount * 0.05) * 40;
        break;
      case 'shake':
        dx = Math.sin(frameCount * 0.5) * 5;
        dy = Math.cos(frameCount * 0.5) * 5;
        break;
      case 'rotate':
        angle = Math.sin(frameCount * 0.05) * 0.5;
        break;
    }

    ctx.save();
    ctx.translate(canvas.width / 2 + dx, canvas.height / 2 + dy);
    if (angle) ctx.rotate(angle);
    ctx.drawImage(img, -img.width / 2, -img.height / 2);
    ctx.restore();
  }

  frameCount++;
  requestAnimationFrame(animate);
}
animate();
</script>
</body>
</html>
